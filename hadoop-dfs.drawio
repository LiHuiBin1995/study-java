<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Safari/537.36" version="24.8.3" pages="4">
  <diagram name="HDFS的写数据流程" id="30qI9tqOHQ6r8G0XzgNk">
    <mxGraphModel dx="1669" dy="635" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-48" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.371;exitY=0.998;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;flowAnimation=1;exitPerimeter=0;" edge="1" parent="1" source="wsTgYcDpY_YJnjC_EcBg-1" target="wsTgYcDpY_YJnjC_EcBg-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-49" value="5、请求建立block传输通道" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="wsTgYcDpY_YJnjC_EcBg-48">
          <mxGeometry x="0.2455" y="1" relative="1" as="geometry">
            <mxPoint x="59" y="1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-59" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;flowAnimation=1;strokeWidth=2;" edge="1" parent="1" source="wsTgYcDpY_YJnjC_EcBg-1" target="wsTgYcDpY_YJnjC_EcBg-13">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="10" y="242" />
              <mxPoint x="10" y="522" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-60" value="7、传输数据" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="wsTgYcDpY_YJnjC_EcBg-59">
          <mxGeometry x="0.342" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-1" value="客户端" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#FFCC99;" vertex="1" parent="1">
          <mxGeometry x="-10" y="140" width="120" height="120" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-7" value="2、响应可以上传文件" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;flowAnimation=1;exitX=-0.015;exitY=0.405;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.965;entryY=0.426;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="wsTgYcDpY_YJnjC_EcBg-2" target="wsTgYcDpY_YJnjC_EcBg-1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="133" y="200" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=-0.04;exitY=0.733;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.795;entryY=0.911;entryDx=0;entryDy=0;entryPerimeter=0;flowAnimation=1;" edge="1" parent="1" source="wsTgYcDpY_YJnjC_EcBg-2" target="wsTgYcDpY_YJnjC_EcBg-1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="100" y="259" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-12" value="4、返回dn1，dn2，dn3节点，标识采用这三个节点存储数据" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="wsTgYcDpY_YJnjC_EcBg-10">
          <mxGeometry x="0.581" y="-1" relative="1" as="geometry">
            <mxPoint x="149" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-2" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#99CCFF;glass=0;" vertex="1" parent="1">
          <mxGeometry x="690" y="120" width="170" height="180" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-4" value="NameNode" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="745" y="90" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-5" value="元数据" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFCCE6;" vertex="1" parent="1">
          <mxGeometry x="718.5" y="180" width="113" height="40" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-6" value="1、向namenode请求上传文件" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0;exitDx=0;exitDy=0;flowAnimation=1;entryX=-0.04;entryY=0.216;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="wsTgYcDpY_YJnjC_EcBg-1" target="wsTgYcDpY_YJnjC_EcBg-2">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="630" y="170" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.994;exitY=0.658;exitDx=0;exitDy=0;entryX=-0.004;entryY=0.545;entryDx=0;entryDy=0;entryPerimeter=0;exitPerimeter=0;flowAnimation=1;" edge="1" parent="1" source="wsTgYcDpY_YJnjC_EcBg-1" target="wsTgYcDpY_YJnjC_EcBg-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-9" value="3、请求上传第一个block（0-128M），请返回datanode" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="wsTgYcDpY_YJnjC_EcBg-8">
          <mxGeometry x="-0.1806" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-25" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="220" y="380" width="120" height="180" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-13" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#66FFFF;" vertex="1" parent="wsTgYcDpY_YJnjC_EcBg-25">
          <mxGeometry y="30" width="120" height="150" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-14" value="DataNode1" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="wsTgYcDpY_YJnjC_EcBg-25">
          <mxGeometry x="30" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-24" value="" style="group" vertex="1" connectable="0" parent="wsTgYcDpY_YJnjC_EcBg-25">
          <mxGeometry x="10" y="90" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-22" value="" style="group" vertex="1" connectable="0" parent="wsTgYcDpY_YJnjC_EcBg-24">
          <mxGeometry y="30" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-15" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="wsTgYcDpY_YJnjC_EcBg-22">
          <mxGeometry width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-16" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#FFFF00;" vertex="1" parent="wsTgYcDpY_YJnjC_EcBg-22">
          <mxGeometry x="14" y="10" width="10" height="10" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-17" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#FFFF00;" vertex="1" parent="wsTgYcDpY_YJnjC_EcBg-22">
          <mxGeometry x="33" y="10" width="10" height="10" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-18" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#FFFF00;" vertex="1" parent="wsTgYcDpY_YJnjC_EcBg-22">
          <mxGeometry x="53" y="10" width="10" height="10" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-19" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#FFFF00;" vertex="1" parent="wsTgYcDpY_YJnjC_EcBg-22">
          <mxGeometry x="73" y="11" width="10" height="10" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-23" value="Bytebuffer" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="wsTgYcDpY_YJnjC_EcBg-24">
          <mxGeometry x="20" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-26" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="470" y="380" width="120" height="180" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-27" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#66FFFF;" vertex="1" parent="wsTgYcDpY_YJnjC_EcBg-26">
          <mxGeometry y="30" width="120" height="150" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-28" value="DataNode1" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="wsTgYcDpY_YJnjC_EcBg-26">
          <mxGeometry x="30" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-29" value="" style="group" vertex="1" connectable="0" parent="wsTgYcDpY_YJnjC_EcBg-26">
          <mxGeometry x="10" y="90" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-30" value="" style="group" vertex="1" connectable="0" parent="wsTgYcDpY_YJnjC_EcBg-29">
          <mxGeometry y="30" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-31" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="wsTgYcDpY_YJnjC_EcBg-30">
          <mxGeometry width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-32" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#FFFF00;" vertex="1" parent="wsTgYcDpY_YJnjC_EcBg-30">
          <mxGeometry x="14" y="10" width="10" height="10" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-33" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#FFFF00;" vertex="1" parent="wsTgYcDpY_YJnjC_EcBg-30">
          <mxGeometry x="33" y="10" width="10" height="10" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-34" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#FFFF00;" vertex="1" parent="wsTgYcDpY_YJnjC_EcBg-30">
          <mxGeometry x="53" y="10" width="10" height="10" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-35" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#FFFF00;" vertex="1" parent="wsTgYcDpY_YJnjC_EcBg-30">
          <mxGeometry x="73" y="11" width="10" height="10" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-36" value="Bytebuffer" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="wsTgYcDpY_YJnjC_EcBg-29">
          <mxGeometry x="20" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-37" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="730" y="380" width="120" height="180" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-38" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#66FFFF;" vertex="1" parent="wsTgYcDpY_YJnjC_EcBg-37">
          <mxGeometry y="30" width="120" height="150" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-39" value="DataNode1" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="wsTgYcDpY_YJnjC_EcBg-37">
          <mxGeometry x="30" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-40" value="" style="group" vertex="1" connectable="0" parent="wsTgYcDpY_YJnjC_EcBg-37">
          <mxGeometry x="10" y="90" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-41" value="" style="group" vertex="1" connectable="0" parent="wsTgYcDpY_YJnjC_EcBg-40">
          <mxGeometry y="30" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-42" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="wsTgYcDpY_YJnjC_EcBg-41">
          <mxGeometry width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-43" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#FFFF00;" vertex="1" parent="wsTgYcDpY_YJnjC_EcBg-41">
          <mxGeometry x="14" y="10" width="10" height="10" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-44" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#FFFF00;" vertex="1" parent="wsTgYcDpY_YJnjC_EcBg-41">
          <mxGeometry x="33" y="10" width="10" height="10" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-45" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#FFFF00;" vertex="1" parent="wsTgYcDpY_YJnjC_EcBg-41">
          <mxGeometry x="53" y="10" width="10" height="10" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-46" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#FFFF00;" vertex="1" parent="wsTgYcDpY_YJnjC_EcBg-41">
          <mxGeometry x="73" y="11" width="10" height="10" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-47" value="Bytebuffer" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="wsTgYcDpY_YJnjC_EcBg-40">
          <mxGeometry x="20" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-50" value="5、请求建立通道" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;flowAnimation=1;" edge="1" parent="1" source="wsTgYcDpY_YJnjC_EcBg-13" target="wsTgYcDpY_YJnjC_EcBg-27">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-51" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;flowAnimation=1;" edge="1" parent="1" source="wsTgYcDpY_YJnjC_EcBg-27" target="wsTgYcDpY_YJnjC_EcBg-38">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-52" value="5、请求建立通道" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="wsTgYcDpY_YJnjC_EcBg-51">
          <mxGeometry x="-0.054" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-53" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.25;exitDx=0;exitDy=0;entryX=0.566;entryY=0.998;entryDx=0;entryDy=0;entryPerimeter=0;flowAnimation=1;" edge="1" parent="1" source="wsTgYcDpY_YJnjC_EcBg-13" target="wsTgYcDpY_YJnjC_EcBg-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-54" value="6、dn1应答成功" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="wsTgYcDpY_YJnjC_EcBg-53">
          <mxGeometry x="-0.3254" relative="1" as="geometry">
            <mxPoint x="34" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-55" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.25;exitDx=0;exitDy=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;flowAnimation=1;" edge="1" parent="1" source="wsTgYcDpY_YJnjC_EcBg-27" target="wsTgYcDpY_YJnjC_EcBg-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-56" value="6、dn2应答成功" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="wsTgYcDpY_YJnjC_EcBg-55">
          <mxGeometry x="0.0548" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-57" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.25;exitDx=0;exitDy=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;flowAnimation=1;" edge="1" parent="1" source="wsTgYcDpY_YJnjC_EcBg-38" target="wsTgYcDpY_YJnjC_EcBg-27">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-58" value="6、dn3应答成功" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="wsTgYcDpY_YJnjC_EcBg-57">
          <mxGeometry x="0.0043" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-61" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;flowAnimation=1;strokeWidth=2;" edge="1" parent="1" source="wsTgYcDpY_YJnjC_EcBg-13" target="wsTgYcDpY_YJnjC_EcBg-27">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-62" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;flowAnimation=1;strokeWidth=2;" edge="1" parent="1" source="wsTgYcDpY_YJnjC_EcBg-27" target="wsTgYcDpY_YJnjC_EcBg-38">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-65" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.011;entryY=0.839;entryDx=0;entryDy=0;entryPerimeter=0;flowAnimation=1;" edge="1" parent="1" target="wsTgYcDpY_YJnjC_EcBg-2">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="70" y="260" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="70" y="271" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-66" value="8、传输数据完成" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="wsTgYcDpY_YJnjC_EcBg-65">
          <mxGeometry x="-0.069" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="wsTgYcDpY_YJnjC_EcBg-68" value="&lt;ol&gt;&lt;li&gt;&lt;span style=&quot;color: rgb(31, 31, 31); font-family: monospace; white-space-collapse: preserve; background-color: rgb(255, 255, 255);&quot;&gt;客户还client向namenode请求上传文件&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;color: rgb(31, 31, 31); font-family: monospace; white-space-collapse: preserve; background-color: rgb(255, 255, 255);&quot;&gt;namenode应答，可以上传&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;color: rgb(31, 31, 31); font-family: monospace; white-space-collapse: preserve; background-color: rgb(255, 255, 255);&quot;&gt;请求上传第一个block(HDFS中对数据的存储都是成块存在的，默认为128MB/block)，因此需要成块上传。&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;color: rgb(31, 31, 31); font-family: monospace; white-space-collapse: preserve; background-color: rgb(255, 255, 255);&quot;&gt;namenode返回存储数据的几个节点。&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;color: rgb(31, 31, 31); font-family: monospace; white-space-collapse: preserve; background-color: rgb(255, 255, 255);&quot;&gt;client请求datanode建立传输block的通道&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;color: rgb(31, 31, 31); font-family: monospace; white-space-collapse: preserve; background-color: rgb(255, 255, 255);&quot;&gt;datanode回复应答成功&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;color: rgb(31, 31, 31); font-family: monospace; white-space-collapse: preserve; background-color: rgb(255, 255, 255);&quot;&gt;开始传输数据。&lt;/span&gt;&lt;/li&gt;&lt;/ol&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="230" y="700" width="400" height="220" as="geometry" />
        </mxCell>
        <mxCell id="vX-ApJSKbwfmNeFZAbA2-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;flowAnimation=1;" edge="1" parent="1" source="vX-ApJSKbwfmNeFZAbA2-1" target="wsTgYcDpY_YJnjC_EcBg-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vX-ApJSKbwfmNeFZAbA2-1" value="0-128M" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" vertex="1" parent="1">
          <mxGeometry x="-130" y="340" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="vX-ApJSKbwfmNeFZAbA2-2" value="kongfu.mkv" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-140" y="430" width="60" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="ITu3VZeaD_9h_fFYPMyV" name="HDFS读数据流程">
    <mxGraphModel dx="1795" dy="730" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="vjH1uIrPbXN-jgsNAaKs-26" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;flowAnimation=1;" edge="1" parent="1" source="uXtGGjbUm-yFPHU-ePEq-1" target="vjH1uIrPbXN-jgsNAaKs-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vjH1uIrPbXN-jgsNAaKs-27" value="3、请求读数据blk_1" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="vjH1uIrPbXN-jgsNAaKs-26">
          <mxGeometry x="0.4873" y="-1" relative="1" as="geometry">
            <mxPoint x="11" y="-6" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="vjH1uIrPbXN-jgsNAaKs-31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;flowAnimation=1;" edge="1" parent="1" source="uXtGGjbUm-yFPHU-ePEq-1" target="vjH1uIrPbXN-jgsNAaKs-16">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="370" y="240" />
              <mxPoint x="370" y="438" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vjH1uIrPbXN-jgsNAaKs-32" value="5、请求读数据blk_2" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="vjH1uIrPbXN-jgsNAaKs-31">
          <mxGeometry x="0.2574" relative="1" as="geometry">
            <mxPoint x="50" y="91" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="uXtGGjbUm-yFPHU-ePEq-1" value="客户端" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#FFCC99;" vertex="1" parent="1">
          <mxGeometry x="-20" y="120" width="140" height="140" as="geometry" />
        </mxCell>
        <mxCell id="OkiI32mgPTWYSabBzV8b-1" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#CCE5FF;" vertex="1" parent="1">
          <mxGeometry x="480" y="120" width="270" height="160" as="geometry" />
        </mxCell>
        <mxCell id="vjH1uIrPbXN-jgsNAaKs-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;flowAnimation=1;" edge="1" parent="1" source="OkiI32mgPTWYSabBzV8b-2" target="uXtGGjbUm-yFPHU-ePEq-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="OkiI32mgPTWYSabBzV8b-2" value="0-128M" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" vertex="1" parent="1">
          <mxGeometry x="-130" y="340" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OkiI32mgPTWYSabBzV8b-3" value="1、请求下载文件/user/bduser/kongfu.mkv" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0;exitDx=0;exitDy=0;entryX=-0.008;entryY=0.125;entryDx=0;entryDy=0;entryPerimeter=0;flowAnimation=1;" edge="1" parent="1" source="uXtGGjbUm-yFPHU-ePEq-1" target="OkiI32mgPTWYSabBzV8b-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="OkiI32mgPTWYSabBzV8b-4" value="2、返回目标文件的元数据" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1.014;entryY=0.571;entryDx=0;entryDy=0;entryPerimeter=0;flowAnimation=1;" edge="1" parent="1" source="OkiI32mgPTWYSabBzV8b-1" target="uXtGGjbUm-yFPHU-ePEq-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="OkiI32mgPTWYSabBzV8b-5" value="NameNode" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="585" y="120" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OkiI32mgPTWYSabBzV8b-6" value="元数据&lt;div&gt;/user/bduser/kongfu.mkv&lt;/div&gt;&lt;div&gt;{[blk_1,blk_2],[blk_1,blk_2],[blk_1,blk_2]}&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;fillColor=#FF99CC;" vertex="1" parent="1">
          <mxGeometry x="500" y="200" width="230" height="60" as="geometry" />
        </mxCell>
        <mxCell id="vjH1uIrPbXN-jgsNAaKs-14" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="190" y="400" width="120" height="150" as="geometry" />
        </mxCell>
        <mxCell id="vjH1uIrPbXN-jgsNAaKs-2" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#66FFFF;container=0;" vertex="1" parent="vjH1uIrPbXN-jgsNAaKs-14">
          <mxGeometry width="120" height="150" as="geometry" />
        </mxCell>
        <mxCell id="vjH1uIrPbXN-jgsNAaKs-3" value="DataNode1" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;container=0;" vertex="1" parent="vjH1uIrPbXN-jgsNAaKs-14">
          <mxGeometry x="30" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vjH1uIrPbXN-jgsNAaKs-6" value="7 blk_1" style="rounded=0;whiteSpace=wrap;html=1;container=0;" vertex="1" parent="vjH1uIrPbXN-jgsNAaKs-14">
          <mxGeometry x="10" y="70" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vjH1uIrPbXN-jgsNAaKs-12" value="7 blk_2" style="rounded=0;whiteSpace=wrap;html=1;container=0;" vertex="1" parent="vjH1uIrPbXN-jgsNAaKs-14">
          <mxGeometry x="10" y="110" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vjH1uIrPbXN-jgsNAaKs-15" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="490" y="400" width="120" height="150" as="geometry" />
        </mxCell>
        <mxCell id="vjH1uIrPbXN-jgsNAaKs-16" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#66FFFF;container=0;" vertex="1" parent="vjH1uIrPbXN-jgsNAaKs-15">
          <mxGeometry width="120" height="150" as="geometry" />
        </mxCell>
        <mxCell id="vjH1uIrPbXN-jgsNAaKs-17" value="DataNode2" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;container=0;" vertex="1" parent="vjH1uIrPbXN-jgsNAaKs-15">
          <mxGeometry x="30" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vjH1uIrPbXN-jgsNAaKs-18" value="7 blk_1" style="rounded=0;whiteSpace=wrap;html=1;container=0;" vertex="1" parent="vjH1uIrPbXN-jgsNAaKs-15">
          <mxGeometry x="10" y="70" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vjH1uIrPbXN-jgsNAaKs-19" value="7 blk_2" style="rounded=0;whiteSpace=wrap;html=1;container=0;" vertex="1" parent="vjH1uIrPbXN-jgsNAaKs-15">
          <mxGeometry x="10" y="110" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vjH1uIrPbXN-jgsNAaKs-21" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="680" y="390" width="120" height="150" as="geometry" />
        </mxCell>
        <mxCell id="vjH1uIrPbXN-jgsNAaKs-22" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#66FFFF;container=0;" vertex="1" parent="vjH1uIrPbXN-jgsNAaKs-21">
          <mxGeometry width="120" height="150" as="geometry" />
        </mxCell>
        <mxCell id="vjH1uIrPbXN-jgsNAaKs-23" value="DataNode2" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;container=0;" vertex="1" parent="vjH1uIrPbXN-jgsNAaKs-21">
          <mxGeometry x="30" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vjH1uIrPbXN-jgsNAaKs-24" value="7 blk_1" style="rounded=0;whiteSpace=wrap;html=1;container=0;" vertex="1" parent="vjH1uIrPbXN-jgsNAaKs-21">
          <mxGeometry x="10" y="70" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vjH1uIrPbXN-jgsNAaKs-25" value="7 blk_2" style="rounded=0;whiteSpace=wrap;html=1;container=0;" vertex="1" parent="vjH1uIrPbXN-jgsNAaKs-21">
          <mxGeometry x="10" y="110" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vjH1uIrPbXN-jgsNAaKs-28" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.75;exitDx=0;exitDy=0;entryX=0.271;entryY=0.993;entryDx=0;entryDy=0;entryPerimeter=0;flowAnimation=1;" edge="1" parent="1" source="vjH1uIrPbXN-jgsNAaKs-2" target="uXtGGjbUm-yFPHU-ePEq-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vjH1uIrPbXN-jgsNAaKs-29" value="4、传输数据" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="vjH1uIrPbXN-jgsNAaKs-28">
          <mxGeometry x="-0.6005" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="vjH1uIrPbXN-jgsNAaKs-30" value="kongfu.mkv" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-140" y="430" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vjH1uIrPbXN-jgsNAaKs-33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.757;entryY=0.95;entryDx=0;entryDy=0;entryPerimeter=0;flowAnimation=1;" edge="1" parent="1" source="vjH1uIrPbXN-jgsNAaKs-16" target="uXtGGjbUm-yFPHU-ePEq-1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="340" y="475" />
              <mxPoint x="340" y="253" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vjH1uIrPbXN-jgsNAaKs-34" value="6、传输数据" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="vjH1uIrPbXN-jgsNAaKs-33">
          <mxGeometry x="-0.754" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="n2Bi1-5VWXgMAPiwylTK-1" value="&lt;ol&gt;&lt;li&gt;客户端client通过DistributedFileSystem向NameNode请求下载文件，NameNode通过查询元数据，查找文件块所在的DataNode地址。&lt;/li&gt;&lt;li&gt;挑选一台DataNode（就近原则，然后随机）服务器，请求读取数据&lt;/li&gt;&lt;li&gt;DataNode开始传输数据给客户端（从磁盘里面读取数据输入流，以Packet为单位来做校验）&lt;/li&gt;&lt;li&gt;客户端以Packet为单位接收，现在本地缓存，然后写入目标文件&lt;/li&gt;&lt;/ol&gt;" style="shape=document;whiteSpace=wrap;html=1;boundedLbl=1;fillColor=#FFB366;verticalAlign=top;align=left;" vertex="1" parent="1">
          <mxGeometry x="200" y="710" width="450" height="290" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="PKZmH83GFj3ciPmGajGF" name="NameNode工作原理">
    <mxGraphModel dx="1139" dy="859" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" background="none" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="xvp_xR8EVowD_0dAFAc9-19" value="" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#66CC00;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="960" y="30" width="420" height="600" as="geometry" />
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="xvp_xR8EVowD_0dAFAc9-1" target="xvp_xR8EVowD_0dAFAc9-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-1" value="client" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#FFCC99;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="50" y="160" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-2" value="" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#66CC00;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="340" y="30" width="420" height="600" as="geometry" />
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-3" value="NameNode" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=0" vertex="1" parent="1">
          <mxGeometry x="520" y="30" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="xvp_xR8EVowD_0dAFAc9-5" target="xvp_xR8EVowD_0dAFAc9-7">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-5" value="内存128G&lt;div&gt;（每个Block占元数据150byte）&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;4、内存数据增删改&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=none;gradientColor=#ea6b66;strokeWidth=2;verticalAlign=top;fontSize=15;" vertex="1" parent="1">
          <mxGeometry x="380" y="80" width="360" height="110" as="geometry" />
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;strokeColor=#CCCC00;" edge="1" parent="1" source="xvp_xR8EVowD_0dAFAc9-6" target="xvp_xR8EVowD_0dAFAc9-27">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-31" value="4、拷贝数据到2nn" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#7F00FF;" vertex="1" connectable="0" parent="xvp_xR8EVowD_0dAFAc9-29">
          <mxGeometry x="0.0022" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-6" value="edits_001" style="whiteSpace=wrap;html=1;fillColor=#dae8fc;gradientColor=#7ea6e0;strokeColor=#6c8ebf;fontSize=15;fontStyle=0" vertex="1" parent="1">
          <mxGeometry x="380" y="490" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-14" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#CCCC00;" edge="1" parent="1" source="xvp_xR8EVowD_0dAFAc9-7" target="xvp_xR8EVowD_0dAFAc9-6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-26" value="3、滚动正在写的Edits" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#7F00FF;" vertex="1" connectable="0" parent="xvp_xR8EVowD_0dAFAc9-14">
          <mxGeometry x="0.0076" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-7" value="edits_inprogress_001" style="whiteSpace=wrap;html=1;fillColor=#dae8fc;gradientColor=#7ea6e0;strokeColor=#6c8ebf;fontSize=15;fontStyle=0" vertex="1" parent="1">
          <mxGeometry x="380" y="300" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-8" value="edits_inprogress_002" style="whiteSpace=wrap;html=1;fillColor=#dae8fc;gradientColor=#7ea6e0;strokeColor=#6c8ebf;fontSize=15;fontStyle=0" vertex="1" parent="1">
          <mxGeometry x="380" y="545" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-9" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.4;entryY=0.991;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="xvp_xR8EVowD_0dAFAc9-7" target="xvp_xR8EVowD_0dAFAc9-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-46" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;strokeColor=#CCCC00;" edge="1" parent="1" source="xvp_xR8EVowD_0dAFAc9-10" target="xvp_xR8EVowD_0dAFAc9-11">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-47" value="8、重命名成Fsimage" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#7F00FF;" vertex="1" connectable="0" parent="xvp_xR8EVowD_0dAFAc9-46">
          <mxGeometry x="0.0008" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-10" value="fsimage.chkpoint" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;gradientColor=#97d077;strokeColor=#82b366;fontSize=15;fontStyle=0" vertex="1" parent="1">
          <mxGeometry x="600" y="420" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-51" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#CCCC00;" edge="1" parent="1" source="xvp_xR8EVowD_0dAFAc9-11" target="xvp_xR8EVowD_0dAFAc9-48">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-11" value="fsimage" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;gradientColor=#97d077;strokeColor=#82b366;fontSize=15;fontStyle=0" vertex="1" parent="1">
          <mxGeometry x="600" y="300" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-12" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.583;entryY=0.991;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="xvp_xR8EVowD_0dAFAc9-11" target="xvp_xR8EVowD_0dAFAc9-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-13" value="1、加载编辑日志&lt;div&gt;和镜像文件到内存&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="497" y="225" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-16" value="2、元数据的增删改请求&lt;div&gt;/user/dev/ss.avi&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="110" y="333" width="150" height="40" as="geometry" />
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-18" value="3、记录操作日志、&lt;div&gt;更新滚动日志&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="349" y="213" width="130" height="40" as="geometry" />
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.25;exitDx=0;exitDy=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;strokeColor=#CCCC00;" edge="1" parent="1" source="xvp_xR8EVowD_0dAFAc9-19" target="xvp_xR8EVowD_0dAFAc9-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-25" value="2、请求执行CheckPoint" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#7F00FF;" vertex="1" connectable="0" parent="xvp_xR8EVowD_0dAFAc9-24">
          <mxGeometry x="0.0082" y="-2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-20" value="Secondary NameNode" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=0" vertex="1" parent="1">
          <mxGeometry x="1035" y="30" width="270" height="30" as="geometry" />
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.998;entryY=0.148;entryDx=0;entryDy=0;entryPerimeter=0;strokeColor=#CCCC00;" edge="1" parent="1" target="xvp_xR8EVowD_0dAFAc9-2">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="960" y="119" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-23" value="1、请求是否需要CheckPoint" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#7F00FF;" vertex="1" connectable="0" parent="xvp_xR8EVowD_0dAFAc9-21">
          <mxGeometry x="0.0185" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-41" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.744;entryY=1.007;entryDx=0;entryDy=0;entryPerimeter=0;strokeColor=#CCCC00;" edge="1" parent="1" source="xvp_xR8EVowD_0dAFAc9-27" target="xvp_xR8EVowD_0dAFAc9-32">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-27" value="edits_001" style="whiteSpace=wrap;html=1;fillColor=#dae8fc;gradientColor=#7ea6e0;strokeColor=#6c8ebf;fontSize=15;fontStyle=0" vertex="1" parent="1">
          <mxGeometry x="1020" y="490" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-32" value="内存" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=none;gradientColor=#ea6b66;strokeWidth=2;verticalAlign=middle;fontSize=15;" vertex="1" parent="1">
          <mxGeometry x="1020" y="190" width="335" height="110" as="geometry" />
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-33" value="CheckPoint触发条件：&lt;div&gt;1）定时时间到&lt;/div&gt;&lt;div&gt;2）Edits中的数据满了&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#7F00FF;" vertex="1" parent="1">
          <mxGeometry x="1125" y="130" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-44" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#CCCC00;" edge="1" parent="1" source="xvp_xR8EVowD_0dAFAc9-34" target="xvp_xR8EVowD_0dAFAc9-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-34" value="fsimage.chkpoint" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;gradientColor=#97d077;strokeColor=#82b366;fontSize=15;fontStyle=0" vertex="1" parent="1">
          <mxGeometry x="1020" y="373" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-39" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.208;exitY=1.01;exitDx=0;exitDy=0;entryX=0.498;entryY=-0.132;entryDx=0;entryDy=0;entryPerimeter=0;exitPerimeter=0;fontColor=#000000;strokeColor=#CCCC00;" edge="1" parent="1" source="xvp_xR8EVowD_0dAFAc9-32" target="xvp_xR8EVowD_0dAFAc9-34">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-43" value="6、生成新的Fsimage" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#7F00FF;" vertex="1" connectable="0" parent="xvp_xR8EVowD_0dAFAc9-39">
          <mxGeometry x="0.0506" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-42" value="5、加载到内存&lt;div&gt;并合并&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#7F00FF;" vertex="1" parent="1">
          <mxGeometry x="1190" y="510" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-45" value="7、拷贝到nn" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#7F00FF;rotation=-15;" vertex="1" parent="1">
          <mxGeometry x="920" y="373" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-48" value="fsimage" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;gradientColor=#97d077;strokeColor=#82b366;fontSize=15;fontStyle=0" vertex="1" parent="1">
          <mxGeometry x="1020" y="440" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-49" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.69;entryY=1.017;entryDx=0;entryDy=0;entryPerimeter=0;strokeColor=#CCCC00;" edge="1" parent="1" source="xvp_xR8EVowD_0dAFAc9-48" target="xvp_xR8EVowD_0dAFAc9-32">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-50" value="5、加载到内存&lt;div&gt;并合并&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#7F00FF;" vertex="1" parent="1">
          <mxGeometry x="1150" y="420" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-53" value="4、拷贝数据到2nn" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#7F00FF;rotation=30;" vertex="1" parent="1">
          <mxGeometry x="750" y="320" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="xvp_xR8EVowD_0dAFAc9-54" value="1）第一阶段：NameNode启动&lt;div&gt;&amp;nbsp; &amp;nbsp; （1）第一次启动NameNode格式化后，创建Fsimage和Edits文件。如果不是第一次启动，直接加载编辑日志和镜像文件到内存。&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; （2）客户端对元数据进行增删改的请求&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; （3）NameNode记录操作日志，更新滚动日志&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; （4）NameNode在内存中对元数据进行增删改&lt;/div&gt;&lt;div&gt;2）第二阶段：Secondary NameNode工作&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; （1）Secondary NameNode询问NameNode是否需要CheckPoint。直接带回NameNode是否检查结果&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; （2）Secondary NameNode请求执行CheckPoint&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; （3）NameNode滚动正在写的Edits日志&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; （4）将滚动前的编辑日志和镜像文件拷贝到Secondary NameNode&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; （5）Secondary NameNode加载编辑日志和镜像文件到内存，并合并&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; （6）生成新的镜像文件fsimage.chkpoint&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; （7）拷贝fsimage.chkpoint到NameNode&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; （8）NameNode将fsimage.chkpoint重新命名成fsimage&lt;/div&gt;" style="shape=document;whiteSpace=wrap;html=1;boundedLbl=1;fillColor=#ffcd28;gradientColor=#ffa500;strokeColor=#d79b00;align=left;verticalAlign=top;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="280" y="689" width="887" height="480" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="omhmD-JZcOEsLbQPEQxm" name="DataNode工作原理">
    <mxGraphModel dx="968" dy="730" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="EHOLzuL8DOGOUfvmINYq-29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;strokeColor=#FF6666;" edge="1" parent="1" source="EHOLzuL8DOGOUfvmINYq-1" target="EHOLzuL8DOGOUfvmINYq-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EHOLzuL8DOGOUfvmINYq-34" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;startArrow=classic;startFill=1;" edge="1" parent="1" source="EHOLzuL8DOGOUfvmINYq-1" target="EHOLzuL8DOGOUfvmINYq-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EHOLzuL8DOGOUfvmINYq-1" value="NameNode" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#97D077;strokeWidth=2;verticalAlign=top;fontSize=15;" vertex="1" parent="1">
          <mxGeometry x="210" y="70" width="540" height="160" as="geometry" />
        </mxCell>
        <mxCell id="EHOLzuL8DOGOUfvmINYq-2" value="元数据" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;gradientColor=#97d077;strokeColor=#82b366;strokeWidth=2;verticalAlign=top;fontSize=15;" vertex="1" parent="1">
          <mxGeometry x="250" y="130" width="470" height="70" as="geometry" />
        </mxCell>
        <mxCell id="EHOLzuL8DOGOUfvmINYq-8" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="30" y="450" width="230" height="280" as="geometry" />
        </mxCell>
        <mxCell id="EHOLzuL8DOGOUfvmINYq-3" value="DataNode1" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#33FF99;verticalAlign=top;fontSize=15;" vertex="1" parent="EHOLzuL8DOGOUfvmINYq-8">
          <mxGeometry width="230" height="280" as="geometry" />
        </mxCell>
        <mxCell id="EHOLzuL8DOGOUfvmINYq-4" value="数据、&lt;font color=&quot;#ff3333&quot; style=&quot;font-size: 15px;&quot;&gt;数据长度、校验和时间戳&lt;/font&gt;" style="whiteSpace=wrap;html=1;fillColor=#dae8fc;gradientColor=#7ea6e0;strokeColor=#6c8ebf;fontSize=15;" vertex="1" parent="EHOLzuL8DOGOUfvmINYq-8">
          <mxGeometry x="10" y="75" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EHOLzuL8DOGOUfvmINYq-5" value="Block1" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="EHOLzuL8DOGOUfvmINYq-8">
          <mxGeometry x="10" y="45" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="EHOLzuL8DOGOUfvmINYq-6" value="数据、&lt;font color=&quot;#ff3333&quot; style=&quot;font-size: 15px;&quot;&gt;数据长度、校验和时间戳&lt;/font&gt;" style="whiteSpace=wrap;html=1;fillColor=#fff2cc;gradientColor=#ffd966;strokeColor=#d6b656;fontSize=15;" vertex="1" parent="EHOLzuL8DOGOUfvmINYq-8">
          <mxGeometry x="10" y="180" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EHOLzuL8DOGOUfvmINYq-7" value="Block3" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="EHOLzuL8DOGOUfvmINYq-8">
          <mxGeometry x="10" y="150" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="EHOLzuL8DOGOUfvmINYq-24" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="800" y="445" width="230" height="280" as="geometry" />
        </mxCell>
        <mxCell id="EHOLzuL8DOGOUfvmINYq-16" value="DataNode3" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#33FF99;verticalAlign=top;fontSize=15;" vertex="1" parent="EHOLzuL8DOGOUfvmINYq-24">
          <mxGeometry width="230" height="280" as="geometry" />
        </mxCell>
        <mxCell id="EHOLzuL8DOGOUfvmINYq-19" value="数据、&lt;font color=&quot;#ff3333&quot; style=&quot;font-size: 15px;&quot;&gt;数据长度、校验和时间戳&lt;/font&gt;" style="whiteSpace=wrap;html=1;fillColor=#fff2cc;gradientColor=#ffd966;strokeColor=#d6b656;fontSize=15;" vertex="1" parent="EHOLzuL8DOGOUfvmINYq-24">
          <mxGeometry x="10" y="80" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EHOLzuL8DOGOUfvmINYq-20" value="Block3" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="EHOLzuL8DOGOUfvmINYq-24">
          <mxGeometry x="10" y="50" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="EHOLzuL8DOGOUfvmINYq-22" value="数据、&lt;font color=&quot;#ff3333&quot; style=&quot;font-size: 15px;&quot;&gt;数据长度、校验和时间戳&lt;/font&gt;" style="whiteSpace=wrap;html=1;fillColor=#f5f5f5;gradientColor=#b3b3b3;strokeColor=#666666;fontSize=15;container=0;" vertex="1" parent="EHOLzuL8DOGOUfvmINYq-24">
          <mxGeometry x="10" y="185" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EHOLzuL8DOGOUfvmINYq-23" value="Block2" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;container=0;" vertex="1" parent="EHOLzuL8DOGOUfvmINYq-24">
          <mxGeometry x="10" y="155" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="EHOLzuL8DOGOUfvmINYq-25" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="450" y="445" width="230" height="280" as="geometry" />
        </mxCell>
        <mxCell id="EHOLzuL8DOGOUfvmINYq-10" value="DataNode2" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#33FF99;verticalAlign=top;fontSize=15;container=0;" vertex="1" parent="EHOLzuL8DOGOUfvmINYq-25">
          <mxGeometry width="230" height="280" as="geometry" />
        </mxCell>
        <mxCell id="EHOLzuL8DOGOUfvmINYq-11" value="数据、&lt;font color=&quot;#ff3333&quot; style=&quot;font-size: 15px;&quot;&gt;数据长度、校验和时间戳&lt;/font&gt;" style="whiteSpace=wrap;html=1;fillColor=#dae8fc;gradientColor=#7ea6e0;strokeColor=#6c8ebf;fontSize=15;container=0;" vertex="1" parent="EHOLzuL8DOGOUfvmINYq-25">
          <mxGeometry x="10" y="185" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EHOLzuL8DOGOUfvmINYq-12" value="Block1" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;container=0;" vertex="1" parent="EHOLzuL8DOGOUfvmINYq-25">
          <mxGeometry x="10" y="155" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="EHOLzuL8DOGOUfvmINYq-13" value="数据、&lt;font color=&quot;#ff3333&quot; style=&quot;font-size: 15px;&quot;&gt;数据长度、校验和时间戳&lt;/font&gt;" style="whiteSpace=wrap;html=1;fillColor=#f5f5f5;gradientColor=#b3b3b3;strokeColor=#666666;fontSize=15;container=0;" vertex="1" parent="EHOLzuL8DOGOUfvmINYq-25">
          <mxGeometry x="10" y="80" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EHOLzuL8DOGOUfvmINYq-14" value="Block2" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;container=0;" vertex="1" parent="EHOLzuL8DOGOUfvmINYq-25">
          <mxGeometry x="10" y="50" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="EHOLzuL8DOGOUfvmINYq-26" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.469;entryY=0.994;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="EHOLzuL8DOGOUfvmINYq-3" target="EHOLzuL8DOGOUfvmINYq-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EHOLzuL8DOGOUfvmINYq-27" value="1、DataNode启动后&lt;div&gt;NameNode注册&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="190" y="280" width="130" height="40" as="geometry" />
        </mxCell>
        <mxCell id="EHOLzuL8DOGOUfvmINYq-28" value="2、DataNode注册成功" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="400" y="170" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="EHOLzuL8DOGOUfvmINYq-30" value="2、注册成功" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="90" y="120" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="EHOLzuL8DOGOUfvmINYq-33" value="3、以后每周期（6小时）&lt;div&gt;上报所有块信息&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="230" y="405" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="EHOLzuL8DOGOUfvmINYq-35" value="4、心跳每3秒一次，&lt;div&gt;心跳返回结果带有&lt;/div&gt;&lt;div&gt;NameNode给&lt;/div&gt;&lt;div&gt;DataNode的命令&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="390" y="290" width="130" height="70" as="geometry" />
        </mxCell>
        <mxCell id="EHOLzuL8DOGOUfvmINYq-36" value="5、超过10分钟+30秒没有&lt;div&gt;收到DataNode2的心跳，&lt;/div&gt;&lt;div&gt;则认为该节点不可用&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="560" y="360" width="160" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
